# AI工作流功能演示指南

## 🎯 功能概览

本AI工作流系统已完成前端功能实现，使用 Mock 数据展示完整的工作流管理能力。后续可直接对接真实后端API。

## 📋 已实现的功能

### 1. 工作流列表管理
- ✅ 查看工作流列表（包含3个示例工作流）
- ✅ 搜索和筛选（按名称、描述、状态）
- ✅ 创建新工作流
- ✅ 编辑工作流
- ✅ 复制工作流
- ✅ 删除工作流（单个/批量）
- ✅ 发布/归档工作流
- ✅ 执行工作流
- ✅ 查看版本历史

### 2. 可视化工作流编辑器
- ✅ 拖拽节点到画布
- ✅ 连接节点（贝塞尔曲线）
- ✅ 节点选择和配置
- ✅ 画布缩放和平移
- ✅ 节点删除（Delete键）
- ✅ 多选节点（Ctrl/Cmd + 点击）
- ✅ 全选（Ctrl/Cmd + A）
- ✅ 保存工作流定义

### 3. 节点类型（8种）
- ✅ **开始节点**：工作流起点
- ✅ **结束节点**：工作流终点
- ✅ **AI对话节点**：调用AI模型（GPT-4、GPT-3.5等）
- ✅ **HTTP请求节点**：调用外部API
- ✅ **数据库节点**：执行数据库查询
- ✅ **条件判断节点**：根据条件分支
- ✅ **数据转换节点**：JavaScript代码转换数据
- ✅ **文件操作节点**：读写文件

### 4. 节点配置面板
每种节点都有专门的配置表单：
- AI节点：模型选择、提示词、温度、最大tokens
- HTTP节点：URL、方法、请求头、请求体、超时
- 数据库节点：连接字符串、SQL查询
- 条件节点：条件表达式
- 转换节点：JavaScript代码编辑器（集成Monaco）
- 文件节点：操作类型、文件路径、内容

### 5. 执行监控
- ✅ 查看执行历史
- ✅ 执行详情对话框
  - 基本信息（状态、耗时、触发者）
  - 节点执行结果时间线
  - 执行日志
  - 输入/输出数据

### 6. 版本管理
- ✅ 查看版本历史
- ✅ 版本恢复功能
- ✅ 变更说明

## 🎮 使用演示

### 场景1：查看示例工作流

1. 访问 `/ai-workflow` 路由
2. 可以看到3个预置的示例工作流：
   - **客户服务自动化工作流**：展示AI分析、条件判断、多分支处理
   - **数据处理工作流**：展示数据库读取、数据转换
   - **API集成工作流**：展示HTTP请求、错误处理

### 场景2：编辑工作流

1. 点击"客户服务自动化工作流"的"编辑"按钮
2. 进入可视化编辑器
3. 可以看到完整的工作流图：
   ```
   开始 → AI分析问题 → 问题分类 → [技术问题/一般问题] → 生成回复 → 结束
   ```
4. 点击任意节点查看右侧配置面板
5. 尝试操作：
   - 滚轮缩放画布
   - 右键拖拽平移
   - 点击节点查看配置
   - 从左侧拖拽新节点
   - 连接节点端口

### 场景3：创建新工作流

1. 点击"新建工作流"
2. 填写名称和描述
3. 自动跳转到编辑器
4. 从左侧节点库拖拽节点：
   - 拖拽"开始"节点到画布
   - 拖拽"AI对话"节点
   - 拖拽"结束"节点
5. 连接节点：
   - 按住"开始"节点的输出端口（绿色圆点）
   - 拖拽到"AI对话"节点的输入端口（蓝色圆点）
   - 同样连接"AI对话"到"结束"
6. 配置AI节点：
   - 点击AI节点
   - 在右侧配置面板设置：
     - 模型：GPT-4
     - 提示词：分析用户输入并生成回复
     - 温度：0.7
7. 点击工具栏"保存"按钮

### 场景4：执行工作流

1. 在列表页点击"执行"按钮
2. 自动弹出执行详情对话框
3. 可以看到：
   - 执行状态：运行中 → 成功
   - 耗时：约5秒
   - 节点执行结果时间线
   - 详细日志

### 场景5：查看版本历史

1. 点击"版本"按钮
2. 查看工作流的所有版本
3. 可以恢复到任意历史版本

## 🎨 UI特性

### 画布操作
- **缩放**：鼠标滚轮 / 工具栏按钮
- **平移**：右键拖拽 / 中键拖拽
- **选择**：左键点击节点
- **多选**：Ctrl/Cmd + 点击
- **删除**：选中后按 Delete 或 Backspace
- **全选**：Ctrl/Cmd + A
- **取消选择**：Esc 或点击空白处

### 视觉反馈
- 节点选中高亮（蓝色边框）
- 连接线动画（虚线流动）
- 拖拽预览
- 状态指示（执行中、成功、失败）
- 悬停提示

### 响应式布局
- 三栏布局可折叠
- 面板可调整大小
- 适配不同屏幕尺寸

## 📊 Mock 数据说明

### 预置工作流

#### 1. 客户服务自动化工作流
- **节点数**：6个
- **执行次数**：128次
- **流程**：接收问题 → AI分析 → 条件判断 → 生成技术/常规回复 → 结束
- **特点**：展示条件分支、多路径处理

#### 2. 数据处理工作流
- **节点数**：4个
- **执行次数**：0次（草稿状态）
- **流程**：开始 → 读取数据库 → JavaScript转换 → 结束
- **特点**：展示数据库操作、代码转换

#### 3. API集成工作流
- **节点数**：3个
- **执行次数**：45次
- **流程**：开始 → HTTP请求 → 结束
- **特点**：展示外部API调用、错误处理

### 执行历史
- 预置2条执行记录
- 包含完整的执行详情、日志、节点结果

### 版本历史
- "客户服务自动化工作流"有3个版本
- 每个版本包含变更说明

## 🔄 后续对接真实API

所有使用 Mock 数据的地方都已标注：
```typescript
// 暂时使用 Mock 数据，后续替换为真实 API
import { mockWorkflowApi } from '@/service/api/workflow-mock';
```

对接步骤：
1. 后端实现 `/src/service/api/workflow.ts` 中定义的接口
2. 将导入从 `workflow-mock` 改为 `workflow`
3. 确保返回数据格式符合类型定义

## 🎯 核心功能展示点

### 1. 可视化编排能力
- 直观的节点拖拽
- 流畅的连接线绘制
- 实时的画布交互

### 2. 丰富的节点类型
- 8种预置节点
- 每种节点有专门的配置界面
- 易于扩展新节点类型

### 3. 完整的生命周期
- 创建 → 编辑 → 发布 → 执行 → 监控
- 版本管理
- 状态流转

### 4. 良好的用户体验
- 快捷键支持
- 视觉反馈
- 错误提示
- 加载状态

## 🚀 快速体验

1. 启动项目：`npm run dev`
2. 访问：`http://localhost:9527/ai-workflow`
3. 点击"编辑"查看示例工作流
4. 尝试创建新工作流
5. 体验各种交互功能

## 📝 注意事项

1. **Mock 数据**：当前所有数据都在前端内存中，刷新页面会重置
2. **Monaco 编辑器**：转换节点的代码编辑器需要 Monaco 正确加载
3. **图标**：使用 Iconify，确保网络可访问图标CDN
4. **浏览器兼容**：推荐使用 Chrome、Edge、Firefox 最新版本

## 🎉 功能亮点

✨ **完全可用的前端系统**：无需后端即可体验完整功能
✨ **真实的交互体验**：所有操作都有实时反馈
✨ **专业的视觉设计**：符合现代UI/UX标准
✨ **易于扩展**：插件化架构，可快速添加新节点
✨ **代码质量高**：TypeScript + Vue 3 + Composition API

现在可以直接演示给产品经理或客户，展示完整的AI工作流管理能力！

