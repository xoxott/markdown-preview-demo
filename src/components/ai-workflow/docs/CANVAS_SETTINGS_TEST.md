# 画布设置功能测试指南

## ✅ 集成完成

画布设置功能已完全集成到 `WorkflowCanvas.tsx` 中。

## 🎯 测试步骤

### 1. 测试连接线设置

1. 打开工作流编辑器页面
2. 在工具栏右侧找到**连接线设置按钮**（线条图标 🔗）
3. 点击按钮，应该弹出"连接线设置"对话框
4. 测试以下功能：
   - **线条类型**：切换不同类型（贝塞尔曲线、直线等）
   - **线条颜色**：使用颜色选择器更改颜色
   - **线条宽度**：拖动滑块调整宽度（1-10px）
   - **动画效果**：开启/关闭动画开关
5. 点击"保存"按钮
6. 验证设置是否生效（需要后续实现应用逻辑）

### 2. 测试背景设置

1. 在工具栏右侧找到**背景设置按钮**（调色板图标 🎨）
2. 点击按钮，应该弹出"背景设置"对话框
3. 测试以下功能：
   - **显示网格**：开启/关闭网格
   - **网格类型**：切换点状、线状、十字
   - **网格大小**：拖动滑块调整（10-50px）
   - **网格颜色**：使用颜色选择器更改网格颜色
   - **背景颜色**：使用颜色选择器更改背景颜色
4. 点击"保存"按钮
5. 验证设置是否生效（需要后续实现应用逻辑）

### 3. 测试对话框交互

- ✅ 点击"取消"按钮应该关闭对话框且不保存
- ✅ 点击对话框外部应该关闭对话框
- ✅ 点击"保存"按钮应该保存设置并关闭对话框
- ✅ 重新打开对话框应该显示上次保存的设置

## 📋 功能清单

### 已完成 ✅

- [x] 创建类型定义 (`canvas-settings.ts`)
- [x] 创建连接线设置对话框 (`ConnectionLineSettingsDialog.tsx`)
- [x] 创建背景设置对话框 (`BackgroundSettingsDialog.tsx`)
- [x] 创建设置管理 Hook (`useCanvasSettings.ts`)
- [x] 在工具栏添加设置按钮
- [x] 在 WorkflowCanvas 中集成对话框
- [x] 所有代码通过 Lint 检查

### 待实现 🔄

- [ ] 将连接线设置应用到 `ConnectionLine` 组件
- [ ] 将背景设置应用到 `CanvasGrid` 组件
- [ ] 持久化设置到 localStorage
- [ ] 添加设置重置功能
- [ ] 添加预设主题功能

## 🔧 下一步开发

### 应用连接线设置

需要修改 `ConnectionLine.tsx`，根据 `connectionLineStyle` 渲染不同样式的线条：

```tsx
// 在 ConnectionLine.tsx 中
const lineStyle = computed(() => ({
  stroke: settings.connectionLine.color,
  strokeWidth: settings.connectionLine.width,
  // ... 根据 type 渲染不同类型的路径
}));
```

### 应用背景设置

需要修改 `CanvasGrid.tsx`，根据 `backgroundSettings` 渲染不同样式的网格：

```tsx
// 在 CanvasGrid.tsx 中
const gridStyle = computed(() => ({
  backgroundColor: settings.background.backgroundColor,
  // ... 根据 gridType 渲染不同类型的网格
}));
```

## 🎨 UI 预览

### 连接线设置对话框
- 标题：连接线设置
- 宽度：500px
- 表单项：4个（类型、颜色、宽度、动画）
- 按钮：取消、保存

### 背景设置对话框
- 标题：背景设置
- 宽度：500px
- 表单项：5个（显示网格、网格类型、网格大小、网格颜色、背景颜色）
- 按钮：取消、保存

## 📝 注意事项

1. 设置目前只保存在内存中，刷新页面会丢失
2. 设置尚未应用到实际的连接线和背景渲染
3. 需要后续实现设置的持久化和应用逻辑

